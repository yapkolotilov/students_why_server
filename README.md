# "Students' Why" Server API

## Введение
Данный файл содержит API для сервера "Почемучник студента" - описание HTTP-запросов, используемых для получения информации или совершения действий с данным сервисом.  
**Важно!** Каждый HTTP-запрос имеет двойной перенос \n\n в качестве разделителя шапки и тела сообщения. Он должен быть даже при отсутствии тела.

## Подключение
Для запуска сервера необходимо в качестве первого аргумента передать ему **ваш local IP/(DNS) (_Получить его можно по [следующей ссылке](https://www.whatismyip.com/what-is-my-public-ip-address/))**. Для запуска тестового клиента надо сделать то же самое.
Для подключения к серверу необходимо подключиться по сокету по адресу **{local IP сервера}** к порту **80** и отправить ему соответствующий строковый запрос образца **"Запрос"** в виде массива байт. Сервер обработает ваш запрос и отправит соответствующий ответ образца **"Ответ"**.
**Важно!** Не рекомендуется использовать подключение через URL, т.к. соответствующие реализации могут не поддерживать Unicode, который использует сервер для кодирования русских символов.  
**Важно!** Пока что есть проблемы с запуском сервера, поэтому для отладки необходимо скачать проект и запустить. Когда сервер получится запустить в сети Интернет, будут опубликованы актуальные IP и номер порта.

### Переменные
Переменные - это значения, вложенные в скобки "{}", которые при отправке сообщения надо заменить необходимыми значениями.
* **{ip}** - ip-адрес сервера;
* **{login}** - логин пользователя в системе Outlook без @hse.ru или @edu.hse.ru;
* **{password}** - пароль пользователя, если он - администратор;
* **{fromDate}, {toDate}** - даты в формате YYYY.MM.DD;
* **{action}** - заголовок, указывающий на действие, которое требуется от сервера;
* **{result}** - заголовок, принимающий значения **Success**, **Fail**, **Already-Done** или **No-Rights**;
* **{programID}** - уникальный идентификатор образовательной программы;
* **{name}** - ФИО в формате "Ф-И-О";
* **{token}** - Токен авторизации. Используется для совершения запросов вместо логина и пароля.

_Прим. Заголовки, помеченные курсивом, являются необязательными_

# JSON-спецификации классов
### Дерево
В деревьях хранятся пользователи, дисциплины, преподаватели, предметы, а также почемучник.  
Дерево является односвязным. Для поиска по нему либо используйте доступные запросы, либо пишите свои методы для частных реализаций.  
**Узел root** - корень дерева, является узлом.  

  ### Узел дерева
  **String id** - Идентификатор узла.  
  **Узел[] nodes** - Потомки.  
  **Лист[] leaves** -  Листья.  

  ### Лист дерева
  **Object value** - Хранимое значение.  
  **String id** - Уникальный идентификатор для листа.  

#### Дополнительная информация по дереву
В приложении всего 2 дерева: дерево почемучника, у которого в листьях лежат только вопросы, и дерево образовательных программ, у которого в листьях могут лежать пользователи, учебные дисциплины или преподаватели  
UML-диаграмма классов:  
![Диаграмма дерева UML](http://images.vfl.ru/ii/1551302805/1a82afb0/25573792_m.png)  
Пример дерева:  
![Пример дерева](http://images.vfl.ru/ii/1551302805/1a82afb0/25573792_m.png)  



### Список
Все списковые структуры данных на сервере представлены либо массивом, либо объектом с единственным полем-массивом.

## User
Пользователь системы.
**String name** - ФИО пользователя    
**String login** - Логин пользователя  

## Tutor
Преподаватель.
**String name** - ФИО  
**String[] emails** - Почты  
**String phone** - Телефон  
**String[] disciplines** - Дисциплины _Прим. Названия дисциплин должны соответствовать названиям_  
**String[] post** - Должности  
**String adress** - Кабинет с адресом  
**String attendTime** - Время присутствия  
**String url** - Ссылка на личную страницу  
**String imgURL** - Ссылка на иконку  

## Discipline
Учебная дисципилна (предмет).
**String name** - Название дисциплины  
**String type** - Тип дисциплины  
**String[] tutors** - Преподаватели  
**String schedule** - Время преподавания: формат {начало}-{конец} с номерами соотв. модулей    
**String url** - Ссылка на страницу дисциплины  

## Item 
**String header** - Заголовок новости.  
**String content** - Контент новости.  
**String publishDate** - Дата публикации в формате DD.MM.YYYY HH:MM. 

## Event
**String header** - Заголовок новости.  
**String content** - Контент новости.  
**double latitude** - Широта.  
**double longitude** - Долгота.  
**String place** - Дополнительная информация о месте проведения.

